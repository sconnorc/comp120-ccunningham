function runGame(){setInterval(function(){if(time>0){if(deathPause>0){runDeath()}else if(movePause>0){runMove()}else{runRegular()}}else{runEndGame()}},timeInterval)}function runDeath(){drawGame();drawDeadFrog();drawDeadFrogMsg();deathPause--}function runMove(){update();drawGame();drawMovingFrog();movePause--}function runRegular(){update();drawGame();drawFrog(frogger)}function runEndGame(){drawGame();deadFrog={x:frogger.x,y:frogger.y};drawDeadFrog();clickOn=true;time=0;if(score>highScore){highScore=score;localStorage["highScore"]=highScore;isNewHighScore=true}drawGameOver()}function update(){updateMovingObjects(vehicles);updateMovingObjects(logs);updateFly();if(isHome()){updateHome()}else{if(isCollisionDeath()){updateCollisionDeath()}else if(isUpArrow){score+=10;isUpArrow=false}}time--}function updateMovingObjects(e){for(i=0;i<e.length;i++){for(j=0;j<e[i].num;j++){if(e[i].direction==directions.left){if(e[i].xCoords[j]<=0-e[i].width){e[i].xCoords[j]=399+e[i].width}else{e[i].xCoords[j]-=e[i].speed}}else{if(e[i].xCoords[j]>=399+e[i].width){e[i].xCoords[j]=0-e[i].width}else{e[i].xCoords[j]+=e[i].speed}}}}}function updateFly(){if(fly[0].isActive){if(fly[0].intervalsActive==0){fly[0].isActive=false}else{fly[0].intervalsActive--;drawFly()}}else{initFly()}}function isCollisionWith(e,t){var n,r;for(i=0;i<e.length;i++){r=frogger.y>=e[i].y&&frogger.y<=e[i].y+e[i].height||frogger.y+frogger.height>=e[i].y&&frogger.y<=e[i].y+e[i].height;for(j=0;j<e[i].num;j++){n=frogger.x>=e[i].xCoords[j]&&frogger.x<=e[i].xCoords[j]+e[i].width||e[i].xCoords[j]>=frogger.x&&e[i].xCoords[j]<=frogger.x+frogger.width;if(n&&r){if(t){moveFrogWith(e[i])}return true}}}return false}function moveFrogWith(e){if(e.direction==directions.left){frogger.x-=e.speed}else{frogger.x+=e.speed}}function isHome(){return isCollisionWith(inlets,false)&&!isCollisionWith(frogsHome,false)&&!isCollisionWith(badlands,false)}function isCollisionDeath(){return isCollisionWith(vehicles,false)||frogger.y<262&&(!isCollisionWith(logs,true)||frogger.x<=0||frogger.x+frogger.width>=399||isCollisionWith(badlands,false))}function updateCollisionDeath(){deadFrog={x:frogger.x,y:frogger.y};numLives--;gameOver=numLives<=0;isUpArrow=false;if(gameOver){runEndGame()}else{frogger.reset();deathPause=50;movePause=0}}function updateHome(){score+=50+Math.round(time*(timeInterval/1e3));numHome++;if(fly[0].isActive&&isCollisionWith(fly,false)){score+=200;fly[0].isActive=false;fly[0].intervalsActive=0}updateFrogsHome();frogger.reset();if(numHome%5==0){score+=1e3;increaseLevel()}}function updateFrogsHome(){var e;if(frogger.x<=95){e=15}else if(frogger.x<=178){e=100}else if(frogger.x<=265){e=185}else if(frogger.x<=348){e=270}else{e=355}frogsHome.push({homeFrog:new frog(directions.up,e,114),num:1,xCoords:new Array,y:72,width:23,height:17});frogsHome[frogsHome.length-1].xCoords[0]=frogsHome[frogsHome.length-1].homeFrog.x}function increaseLevel(){level++;initObjects();increaseSpeed(vehicles);increaseSpeed(logs)}function increaseSpeed(e){for(i=0;i<e.length;i++){e[i].speed++}}function eventListener(){$(document).keydown(function(e){var t={left:37,up:38,right:39,down:40};if(deathPause==0){if(e.which==t.left||e.keyCode==t.left){frogger=new frog(directions.left,frogger.x,frogger.y);movePause=2}else if(e.which==t.up||e.keyCode==t.up){frogger=new frog(directions.up,frogger.x,frogger.y);movePause=2;isUpArrow=true}else if(e.which==t.right||e.keyCode==t.right){frogger=new frog(directions.right,frogger.x,frogger.y);movePause=2}else if((e.which==t.down||e.keyCode==t.down)&&frogger.y<485){frogger=new frog(directions.down,frogger.x,frogger.y);movePause=2}else{return}}else{return}e.preventDefault()});$("#clickSubmit").click(function(){if(clickOn){}});$("#clickPlay").click(function(){if(clickOn){init()}})}